<!DOCTYPE html>
<html lang="en">
<script src="/js/src/photoswipe.min.js?v="></script>
<script src="/js/src/photoswipe-ui-default.min.js?v="></script>
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.caohr.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":null,"activeClass":"disqus"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Weâ€™ve all been there. Thereâ€™s a new requirement and you need to add or remove a view at runtime, and also need to reposition adjacent views.">
<meta property="og:type" content="article">
<meta property="og:title" content="UIStackView Tutorial Introducing Stack Views">
<meta property="og:url" content="https://blog.caohr.com/2021/12/16/Swift/StackView/index.html">
<meta property="og:site_name" content="HR&#39;s Blog">
<meta property="og:description" content="Weâ€™ve all been there. Thereâ€™s a new requirement and you need to add or remove a view at runtime, and also need to reposition adjacent views.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/1-starterProject-1-252x500.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/2-starterProject-480x242.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/3-starterProject-480x242.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/initialDeviceView-480x234.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/viewAsMenuSmaller-480x139.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/storyboardColors-299x500.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/spotInfoButtons-480x165.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/showDaOutline.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/buttonsSelected-480x209.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/stackButton.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/stackConfirmed-480x74.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/buttonConstrainOld.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/buttonConstraintsWiped.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/noConstraints-369x320.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/stackSelect1-480x112.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/stackSelect2.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/pinButton.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/add4Constraints-225x320.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/Screen-Shot-2017-07-23-at-2.05.40-PM-480x62.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/equalSpacing.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/4-squashedButton-252x500.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/Capto_Capture-2017-07-16_06-03-40_PM.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/5-niceButton-252x500.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/21-alternate-solution-1_346x76.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/ratingSelect-2.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/ratingStacked.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/add3Constraints.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/spacing8.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/xcodeBug-650x84.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/refreshLayoutButton.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/starsBack.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/unembed.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/whyVisitSelected-650x73.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/whyVisitStacked-650x76.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/whyVisitConstraintDetail.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/whyVisitConstrained-650x66.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/hortical.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/alignFill.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/alignLeading.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/alignCenter.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/alignTrailing.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/alignFillRed.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/whatToSee-650x305.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/40-weather-stack-in-stack_640x92.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/41-weather-stack-in-stack-alignment-bottom_640x92.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/weatherStacked-650x104.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/43-weather-click-stack-button_640x92.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/44-weather-alignment-fill_640x92.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/45-select-just-the-weather-label_640x92.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/46-weather-in-horizontal-stack_640x92.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/47-vertical-and-leading_640x92.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/6-hideInPlainSight-255x500.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/49-drag-to-weather-label_380x94.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/hideButtonAlignment-399x320.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/7-hidden-392x320.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/fiveSelected-650x245.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/topStack-650x167.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/topStackConstrained-650x253.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/8-hideInPlainSite2-255x500.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/hideButtonAlignment2.jpg">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/57-drag-and-drop-to-reposition-section_639x130.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/refreshLayoutButton.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/60-hide-button-back-to-correct-position_640x130.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/sizeClasses-480x271.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/CompactHeight-480x183.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/sizeClasses2-1-480x320.png">
<meta property="og:image" content="http://blog.caohr.com/ImagesFolder/15319940423928.png">
<meta property="article:published_time" content="2021-12-16T15:57:31.502Z">
<meta property="article:modified_time" content="2022-01-08T05:39:58.738Z">
<meta property="article:author" content="HR">
<meta property="article:tag" content="Ray Wenderlich">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.caohr.com/ImagesFolder/1-starterProject-1-252x500.png">

<link rel="canonical" href="https://blog.caohr.com/2021/12/16/Swift/StackView/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>UIStackView Tutorial Introducing Stack Views | HR's Blog</title>
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-61905451-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-61905451-1');
</script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1b08dac8932c829229886a7ff2235549";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
<!-- ç›¸å†Œç›¸å…³ä»£ç å¼€å§‹ -->
  
<!-- ç›¸å†Œç›¸å…³ä»£ç ç»“æŸ -->
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HR's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Swimming ğŸŠ in the seağŸŒŠof code!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-photos">

    <a href="/album/" rel="section"><i class="fa fa-camera fa-fw"></i>Photos</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.caohr.com/2021/12/16/Swift/StackView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="HR">
      <meta itemprop="description" content="Swimming ğŸŠ in the seağŸŒŠof code!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HR's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UIStackView Tutorial Introducing Stack Views
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-16 23:57:31" itemprop="dateCreated datePublished" datetime="2021-12-16T23:57:31+08:00">2021-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-08 13:39:58" itemprop="dateModified" datetime="2022-01-08T13:39:58+08:00">2022-01-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2021/12/16/Swift/StackView/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/12/16/Swift/StackView/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Weâ€™ve all been there. Thereâ€™s a new requirement and you need to add or remove a view at runtime, and also need to reposition adjacent views.</p>
<span id="more"></span>

<p>What approach do you take? Do you add outlets to constraints in your storyboard so that you can activate or deactivate certain ones? Or do you use a third party library? Or depending on the complexity maybe you do everything in code.</p>
<p>Maybe this time around your view hierarchy didnâ€™t have to change at runtime, but you still had to figure out how to squeeze this one new view into your storyboard.</p>
<p>Did you ever end up just clearing all constraints and re-adding them from scratch because it was easier than performing painstakingÂ <em>constraints-surgery</em>?</p>
<p>With the introduction ofÂ <code>UIStackView</code>, the above tasks become trivial. In this UIStackView tutorial, youâ€™ll learn how stack views provide an easy way to lay out a series of views horizontally or vertically. Youâ€™ll learn how to get views to automagically adjust themselves to the available space by using properties such as alignment, distribution, and spacing. Enjoy :]</p>
<p><em>Note</em>: ThisÂ <code>UIStackView</code>Â tutorialÂ assumes basic familiarity with Auto Layout. If youâ€™re new to Auto Layout check out theÂ <a target="_blank" rel="noopener" href="https://videos.raywenderlich.com/courses/62-beginning-auto-layout/lessons/1">Beginning Auto Layout</a>Â video tutorial.</p>
<h2 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h2><p>In thisÂ <code>UIStackView</code>Â tutorial, youâ€™ll work on an app calledÂ <em>Vacation Spots</em>. Itâ€™s a simple app that shows you a list of places to get away from it all.</p>
<p>But donâ€™t pack your bags just yet, because there are a few issues youâ€™ll fix by using stack views, and in a much simpler way than if you were using Auto Layout alone.</p>
<p>Start by downloading theÂ <a target="_blank" rel="noopener" href="https://koenig-media.raywenderlich.com/uploads/2017/07/VacationSpots_Starter-2.zip">starter project</a>Â for thisÂ <code>UIStackView</code>Â tutorial. Open the project and run it on theÂ <em>iPhone 7 Simul<a target="_blank" rel="noopener" href="http://www.caohr.com/ImagesFolderator">http://www.caohr.com/ImagesFolderator</a></em>. Youâ€™ll see a list of places you can go on vacation.</p>
<p><img src="http://blog.caohr.com/ImagesFolder/1-starterProject-1-252x500.png"></p>
<p>Go to the info view for London by tapping on theÂ <em>London</em>Â cell.</p>
<p>At first glance, the view may seem okay, but it has a few issues.</p>
<ol>
<li>Look at the row of buttons at the bottom of the view. They are currently positioned with a fixed amount of space between themselves, so they donâ€™t adapt to the screen width. To see the problem in full glory, temporarily rotate the simulator to landscape orientation by pressingÂ <em>Command-left arrow</em>.åº•éƒ¨çš„æŒ‰é’®èœå•æ²¡æœ‰å‡åŒ€åˆ†å¸ƒ</li>
</ol>
<p><img src="http://blog.caohr.com/ImagesFolder/2-starterProject-480x242.png" alt="uistackview tutorial"></p>
<ol>
<li>Tap on theÂ <em>Hide</em>Â button next toÂ <em>WEATHER</em>. It successfully hides the text, but it doesnâ€™t reposition the section below it, leaving a block of blank space. ç‚¹å‡»å¤©æ°”æ—è¾¹çš„hideï¼Œéšè—åï¼Œæœ‰ä¸€å¤§ç‰‡ç™½è‰²åŒºåŸŸã€‚</li>
</ol>
<p><img src="http://blog.caohr.com/ImagesFolder/3-starterProject-480x242.png" alt="uistackview tutorial"></p>
<ol>
<li>The ordering of the sections can be improved. It would be more logical if theÂ <em>what to see</em>Â section was positioned right after theÂ <em>why visit</em>Â section, instead of having theÂ <em>weather</em>Â section in between them.</li>
<li>The bottom row of buttons is a bit too close to the bottom edge of the view in landscape mode. It would be better if you could decrease the spacing between the different sections â€“ but only in landscape mode.åº•éƒ¨æŒ‰é’®å¤ªé è¿‘åº•éƒ¨äº†ï¼Œå¦‚æœåœ¨<code>landscape</code>æ¨¡å¼ä¸‹ç•™è¶³å¤Ÿçš„é—´è·</li>
</ol>
<p>Now that you have an idea of the improvements youâ€™ll be making, itâ€™s time to dive into the project.</p>
<p>OpenÂ <em>Main.storyboard</em>. The first time you do that, youâ€™ll be asked toÂ <em>Choose an initial device view</em>. This view has no effect at runtime â€” the view will resize for different devices â€” this just makes it a bit easier to work with the storyboard. Select the iPhone 7.</p>
<p><img src="http://blog.caohr.com/ImagesFolder/initialDeviceView-480x234.png" alt="uistackview tutorial"></p>
<p>You can change the view any time by clicking theÂ <em>View As: iPhone 7</em>Â link at the bottom left of the storyboard canvas.</p>
<p><img src="http://blog.caohr.com/ImagesFolder/viewAsMenuSmaller-480x139.png" alt="uistackview tutorial"></p>
<p>Now take a close look at theÂ <em>Spot Info View Controller</em>Â scene. Whoa! Whatâ€™s with all the colors?</p>
<p><img src="http://blog.caohr.com/ImagesFolder/storyboardColors-299x500.png" alt="uistackview tutorial"></p>
<p>These labels and buttons have various background colors set that will be cleared at runtime. In the storyboard, theyâ€™re simply visual aids to help show how changing various properties of a stack view will affect the frames of its embedded views.è¿™äº›<code>labels</code>å’Œ<code>buttons</code>éƒ½æœ‰èƒŒæ™¯é¢œè‰²ï¼Œè¿™äº›é¢œè‰²åœ¨è¿è¡Œçš„æ—¶å€™å°†ä¼šæ¸…ç©ºã€‚</p>
<p>You donâ€™t need to do this now, but if at any point youâ€™d actually like to see the background colors while running the app, you can temporarily comment out the following lines inÂ <code>viewDidLoad()</code>Â insideÂ <code>SpotInfoViewController</code>.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Clear background colors from labels and buttons</span></span><br><span class="line"><span class="keyword">for</span> view <span class="keyword">in</span> backgroundColoredViews &#123;</span><br><span class="line">    view.backgroundColor <span class="operator">=</span> <span class="type">UIColor</span>.clear</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Also, any outlet-connected labels have placeholder text thatâ€™s set to the name of the outlet variable to which they are connected. This makes it a bit easier to tell which labels will have their text updated at runtime. For example, the label with textÂ **Â is connected to:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> whyVisitLabel: <span class="type">UILabel</span>!</span><br></pre></td></tr></table></figure>
<p>Enough introduction, letâ€™s get started!</p>
<h2 id="Your-first-stack-view"><a href="#Your-first-stack-view" class="headerlink" title="Your first stack view"></a>Your first stack view</h2><p>ç¬¬ä¸€ä»¶äº‹è¦åšçš„äº‹æƒ…å°±æ˜¯ä¿®å¤åº•éƒ¨æŒ‰é’®ä¹‹é—´çš„é—´è·ã€‚<br>The first thing youâ€™ll fix by using a stack view is the spacing between the bottom row of buttons. A stack view can distribute its views along its axis in various ways, and one of the ways is with an equal amount of spacing between each view.</p>
<p>Fortunately, embedding existing views into a new stack view is not rocket science. First, select all of the buttons at the bottom of theÂ <em>Spot Info View Controller</em>Â scene byÂ <em>clicking</em>Â on one, thenÂ <em>Command-click</em>on the other two:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/spotInfoButtons-480x165.png" alt="uistackview tutorial"></p>
<p>If the outline view isnâ€™t already open, go ahead and open it by using theÂ <em>Show Document Outline</em>Â button at the bottom left of the storyboard canvas:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/showDaOutline.png" alt="uistackview tutorial"></p>
<p>Verify that all 3 buttons are selected by checking them in the outline view:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/buttonsSelected-480x209.png" alt="uistackview tutorial"></p>
<p>In case they arenâ€™t all selected, you can alsoÂ <em>Command-click</em>Â on each button in the outline view to select them.</p>
<p>Once selected, click on the newÂ <em>Stack</em>Â button in the Auto Layout toolbar at the bottom right of the storyboard canvas:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/stackButton.png"></p>
<p>The buttons will become embedded in a new stack view:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/stackConfirmed-480x74.png" alt="uistackview tutorial"></p>
<p>The buttons are now flush with each other â€“ youâ€™ll that fix shortly.</p>
<p>While the stack view takes care of positioning the buttons, you still need to add Auto Layout constraints to position the stack view itself. å½“<code>stack view</code> æŒç®¡äº†åº•éƒ¨çš„æŒ‰é’®ï¼Œä½ ä»ç„¶éœ€è¦æ·»åŠ <code>Auto Layout</code>æ¥æ§åˆ¶<code>StackView</code>æœ¬èº«ã€‚</p>
<p>å½“ä½ æŠŠ<code>View</code>åµŒå…¥åˆ°<code>Stack View</code>é‡Œé¢ä»¥åï¼Œä»»ä½•åœ¨<code>View</code>ä¸Šçš„çº¦æŸéƒ½ä¼šè¢«æ¸…é™¤ã€‚<br>When you embed a view in a stack view, any constraints to other views are removed. For example, prior to embedding the buttons in a stack view, the top of theÂ <em>Submit Rating</em>Â button had a vertical spacing constraint connecting it to the bottom of theÂ <em>Rating:</em>Â label:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/buttonConstrainOld.png" alt="uistackview tutorial"></p>
<p>Click on theÂ <em>Submit Rating</em>Â button to see that it no longer has any constraints attached to it:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/buttonConstraintsWiped.png" alt="uistackview tutorial"></p>
<p>Another way to verify that the constraints are gone is by looking at theÂ <em>Size inspector</em>Â (âŒ¥âŒ˜5):</p>
<p><img src="http://blog.caohr.com/ImagesFolder/noConstraints-369x320.png" alt="uistackview tutorial"></p>
<p>In order to add constraints to position the stack view itself, youâ€™ll first need to select it. Selecting a stack view in the storyboard can get tricky if its views completely fill the stack view.</p>
<p>One simple way is to select the stack view in the outline view:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/stackSelect1-480x112.png" alt="uistackview tutorial"></p>
<p>å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯æŒ‰ä½<code>shift</code>é”®å’Œå³é”®ä¸€èµ·ã€‚<br>Another trick is to holdÂ <em>Shift</em>Â andÂ <em>Right-click</em>Â on any of the views in the stack view, orÂ <em>Control-Shift-click</em>Â if youâ€™re using a trackpad. Youâ€™ll get a context menu that shows the view hierarchy at the location you clicked, and you simply select the stack view by clicking on it in the menu.</p>
<p>For now, select the stack view using theÂ <em>Shift-Right-click</em>Â method:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/stackSelect2.png" alt="uistackview tutorial"></p>
<p>Now, click theÂ <em>Pin</em>Â button on the Auto Layout toolbar to add constraints to it:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/pinButton.png" alt="uistackview tutorial"></p>
<p>First add a check toÂ <em>Constrain to margins</em>. Then add the following constraints to the edges of your stack view:</p>
<p>Top: 20, Leading: 0, Trailing: 0, Bottom: 0</p>
<p>Double-check the numbers for the top, leading, trailing, and bottom constraints and make sure that theÂ <em>I-beams</em>Â are selected. Then click onÂ <em>Add 4 Constraints</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/add4Constraints-225x320.jpg" alt="uistackview tutorial"></p>
<p>Now the stack view is the correct size, but it has stretched the first button to fill in any extra space:<br><img src="http://blog.caohr.com/ImagesFolder/Screen-Shot-2017-07-23-at-2.05.40-PM-480x62.png" alt="uistackview tutorial"></p>
<p>The property that determines how a stack view lays out its views along its axis is itsÂ <code>distribution</code>Â property. Currently, itâ€™s set toÂ <code>Fill</code>, which means the contained views will completely fill the stack view along its axis. To accomplish this, the stack view will only expand one of its views to fill that extra space; specifically, it expands the view with the lowest horizontal content hugging priority, or if all of the priorities are equal, it expands the first view.</p>
<p>However, youâ€™re not looking for the buttons to fill the stack view completely â€“ you want them to be equally spaced.</p>
<p>Make sure the stack view is still selected, and go to theÂ <em>Attributes inspector</em>. Change theÂ <em>Distribution</em>fromÂ <em>Fill</em>Â toÂ <em>Equal Spacing</em>:<br>å› ä¸ºä¹‹å‰æ˜¯Fillæ‰€æœ‰ä¹‹é—´ä¸ç•™ç©ºéš™ï¼Œå°†<code>Distribution</code>æ”¹ä¸º<code>Equal Spaceing</code></p>
<p><img src="http://blog.caohr.com/ImagesFolder/equalSpacing.png" alt="uistackview tutorial"></p>
<p>Now build and run, tap on any cell, and rotate the simulator (âŒ˜â†’). Youâ€™ll see that the bottom buttons now space themselves equally! </p>
<p>ä½†æ˜¯å¦‚æœä½ ç”¨SEçš„æ¨¡æ‹Ÿå™¨ï¼Œä½ ä¼šå‘ç°<code>Submit Rating</code>æŒ¤åˆ°äº†ä¸€èµ·ã€‚<br>But thereâ€™s one more thing to consider. Build and run your app using the smallerÂ <em>iPhone SE</em>Â simulator. Tap through to London and youâ€™ll notice theÂ <em>Submit Rating</em>Â is squashed.<br><img src="http://blog.caohr.com/ImagesFolder/4-squashedButton-252x500.png" alt="uistackview tutorial"></p>
<p>Fortunately, thatâ€™s an easy fix. Go back to theÂ <em>Attributes inspector</em>. Change theÂ <em>Distribution</em>Â fromÂ <em>Equal Spacing</em>Â toÂ <em>Fill Proportionally</em>Â and add 10 for spacing.<br>å¹¸è¿çš„æ˜¯è¿™ä¸ªå¾ˆå®¹æ˜“ä¿®å¤ï¼Œè¿”å›<code>Attributes inspector</code>æ”¹å˜<code>Distribution</code>ä»<code>Equal Spacing</code>åˆ°<code>Fill Proportionally</code>ç„¶åæ·»åŠ 10çš„<code>spacing</code></p>
<p><img src="http://blog.caohr.com/ImagesFolder/Capto_Capture-2017-07-16_06-03-40_PM.png" alt="uistackview tutorial"></p>
<p>Now build and run one more time on the iPhone SE simulator and everything should look in order.</p>
<p><img src="http://blog.caohr.com/ImagesFolder/5-niceButton-252x500.png" alt="uistackview tutorial"></p>
<p>Congratulations, youâ€™ve built your first stack view!</p>
<p>In order to solve this problem without a stack view, you would have had to use spacer views, one between each pair of buttons. Youâ€™d have to add equal width constraints to all of the spacer views as well as lots of additional constraints to position the spacer views correctly.<br>å¦‚æœæ²¡æœ‰<code>StackView</code>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä»–ä»¬ä¹‹é—´æ”¾ç½®ç­‰å®½çš„<code>spacer views</code></p>
<p>It would have looked something like the following. For visibility in the screenshot, the spacer views have been given a light gray background:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/21-alternate-solution-1_346x76.png" alt="uistackview tutorial"></p>
<p>This isnâ€™t too much of an issue if you only have to do this once in the storyboard, but many views are dynamic. Itâ€™s not a straightforward task to add a new button or to hide or remove an existing button at runtime because of the adjacent spacer views and constraints.</p>
<p>In order to hide a view within a stack view, all you have to do is set the contained viewâ€™sÂ <code>hidden</code>Â property toÂ <code>true</code>Â and the stack view handles the rest. This is how youâ€™ll fix the spacing under theÂ <em>WEATHER</em>Â label when the user hides the text below it. Youâ€™ll do that a bit later in thisÂ <code>UIStackView</code>Â tutorial once youâ€™ve added the weather section labels into a stack view.<br>åœ¨<code>Stack View</code>ä¸­å¦‚æœä½ éœ€è¦éšè—ä¸€ä¸ªviewé‚£ä¹ˆä½ åªéœ€è¦æŠŠè¿™ä¸ªviewè®¾ç½®ä¸º<code>hidden</code>ã€‚å‰©ä¸‹çš„å°±äº¤ç»™<code>Stack view</code>å°±å¯ä»¥äº†ã€‚</p>
<blockquote>
<p>ç›®å‰ä½ çŸ¥é“äº†æ€æ ·æŒ‡å®š<code>view</code>ä¹‹é—´çš„<code>spacing</code>ï¼Œä½†æ˜¯å¦‚æœä½ è¦åœ¨ç‰¹å®šçš„<code>view</code>åé¢ç•™ç‰¹å®šè·ç¦»çš„é—´è·ï¼Œé‚£ä¹ˆå°±ä¼šç”¨åˆ°ä¸€ä¸ªæ–°çš„æ–¹æ³•<code>setCustomSpacing:afterView</code><br><em>Note</em>: You now know how to specify the spacing between subviews in your stack. But what if you want different spacing after a specific subview? In iOS 11, you can do that with a new method,Â <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/uistackview/2866023-setcustomspacing"><em>setCustomSpacing:afterView</em></a>.</p>
</blockquote>
<h2 id="Converting-the-sections"><a href="#Converting-the-sections" class="headerlink" title="Converting the sections"></a>Converting the sections</h2><p>You will convert all of the other sections inÂ <code>SpotInfoViewController</code>Â to use stack views as well. This will enable you to easily complete the remaining tasks. Youâ€™ll convert the rating section next.</p>
<h3 id="Rating-section"><a href="#Rating-section" class="headerlink" title="Rating section"></a>Rating section</h3><p>Right above the stack view that you just created, select theÂ <em>RATING</em>Â label and the stars label next to it:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/ratingSelect-2.png" alt="uistackview tutorial"></p>
<p>Then click on theÂ <em>Stack</em>Â button to embed them in a stack view:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/ratingStacked.png" alt="uistackview tutorial"></p>
<p>Normally, your next step would be to add your stack view constraints. But there seems to be a bug in Xcode 9 beta 4 that makes it necessary to give your stack view a width before adding relative constraints. So click on theÂ <em>Pin</em>Â button, give your stack view a width of 200 and click the â€œAdd 1 Constraintâ€ button.</p>
<p>Now click on theÂ <em>Pin</em>Â button once again. Place a checkmark inÂ <em>Constrain to margins</em>Â and add the followingÂ <em>three</em>Â constraints:</p>
<p>Top: 20, Leading: 0, Bottom: 20</p>
<p><img src="http://blog.caohr.com/ImagesFolder/add3Constraints.png" alt="uistackview tutorial"></p>
<p>Now go to theÂ <em>Attributes inspector</em>Â and set the spacing toÂ <em>8</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/spacing8.png"></p>
<p>Itâ€™s possible you may see aÂ <em>Misplaced Views</em>Â warning and see something like this in which the stars label has stretched beyond the bounds of the view:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/xcodeBug-650x84.png" alt="uistackview tutorial"></p>
<p>Sometimes Xcode may temporarily show a warning or position the stack view incorrectly, but the warning will disappear as you make other updates. You can usually safely ignore these.</p>
<p>However, to fix it immediately, click theÂ <em>Refresh Layout</em>Â button right next to the stack view button.</p>
<p><img src="http://blog.caohr.com/ImagesFolder/refreshLayoutButton.png"></p>
<p><img src="http://blog.caohr.com/ImagesFolder/starsBack.png"></p>
<p>Build and run to verify that everything looks exactly the same as before.</p>
<h3 id="Unembedding-a-stack-view"><a href="#Unembedding-a-stack-view" class="headerlink" title="Unembedding a stack view"></a>Unembedding a stack view</h3><p>Before you go too far, itâ€™s good to have some basic â€œfirst aidâ€ training. Sometimes you may find yourself with an extra stack view that you no longer need, perhaps because of experimentation, refactoring or just by accident.</p>
<p>Fortunately, there is an easy way toÂ <em>unembed</em>Â views from a stack view.</p>
<p>First, youâ€™d select the stack view you want to remove. Then hold down theÂ <em>Option</em>Â key and click on theÂ <em>Stack</em>Â button. The clickÂ <em>Unembed</em>Â on the context menu that appears:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/unembed.png"></p>
<p>Another way to do this is to select the stack view and then chooseÂ *EditorÂ <em><em>*</em>Â Unembed</em>Â from the menu.</p>
<h3 id="Your-first-vertical-stack-view"><a href="#Your-first-vertical-stack-view" class="headerlink" title="Your first vertical stack view"></a>Your first vertical stack view</h3><p>Now, youâ€™ll create your first vertical stack view. Select theÂ <em>WHY VISIT</em>Â label and theÂ **Â below it:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/whyVisitSelected-650x73.png" alt="uistackview tutorial"></p>
<p>Xcode will correctly infer that this should be a vertical stack view based on the position of the labels. Click theÂ <em>Stack</em>Â button to embed both of these in a stack view:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/whyVisitStacked-650x76.png" alt="uistackview tutorial"></p>
<p>The lower label previously had a constraint pinning it to the right margin of the view, but that constraint was removed when it was embedded in the stack view. Currently, the stack view has no constraints, so it adopts the intrinsic width of its largest view.</p>
<p>With the stack view selected, click on theÂ <em>Pin</em>Â button. CheckmarkÂ <em>Constrain to margins</em>, and set theÂ <em>Top</em>,Â <em>Leading</em>Â andÂ <em>Trailing</em>Â constraints toÂ <em>0</em>.</p>
<p>Then, click on the dropdown to the right of the bottom constraint and selectÂ <em>WEATHER (current distance = 20)</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/whyVisitConstraintDetail.jpg" alt="uistackview tutorial"></p>
<p>By default, constraints are shown to the nearest neighbor, which for the bottom constraint is theÂ <em>Hide</em>button at a distance of 15. You actually needed the constraint to be to theÂ <em>WEATHER</em>Â label below it.</p>
<p>Finally, clickÂ <em>Add 4 Constraints</em>. You should now see the following:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/whyVisitConstrained-650x66.png" alt="uistackview tutorial"></p>
<p>You now have an expanded stack view with its right edges pinned to the right margin of the view. However, the bottom label is still the same width. Youâ€™ll fix this by updating the stack viewâ€™sÂ <code>alignment</code>Â property.</p>
<h3 id="Alignment-property"><a href="#Alignment-property" class="headerlink" title="Alignment property"></a>Alignment property</h3><p>TheÂ <code>alignment</code>Â property determines how a stack view lays out its viewsÂ <em>perpendicular</em>Â to its axis. For a vertical stack view, the possible values areÂ <code>Fill</code>,Â <code>Leading</code>,Â <code>Center</code>, andÂ <code>Trailing</code>.</p>
<p>The possibleÂ <code>alignment</code>Â values for aÂ <em>horizontal</em>Â stack view differ slightly:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/hortical.png" alt="uistackview tutorial"></p>
<p>It hasÂ <code>.top</code>Â instead ofÂ <code>.leading</code>Â and hasÂ <code>.bottom</code>Â instead ofÂ <code>.trailing</code>. There are also two more properties that are valid only in the horizontal direction,Â <code>.firstBaseline</code>Â andÂ <code>.lastBaseline</code>.</p>
<p>Select each value to see how it affects the placement of the labels for the vertical stack view:</p>
<p><em>Fill:</em></p>
<p><img src="http://blog.caohr.com/ImagesFolder/alignFill.jpg" alt="uistackview tutorial"></p>
<p><em>Leading:</em></p>
<p><img src="http://blog.caohr.com/ImagesFolder/alignLeading.jpg" alt="uistackview tutorial"></p>
<p><em>Center:</em><br><img src="http://blog.caohr.com/ImagesFolder/alignCenter.jpg" alt="uistackview tutorial"></p>
<p><em>Trailing:</em></p>
<p><img src="http://blog.caohr.com/ImagesFolder/alignTrailing.jpg" alt="uistackview tutorial"></p>
<p>When youâ€™re done testing each value, set theÂ <em>Alignment</em>Â toÂ <em>Fill</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/alignFillRed.jpg" alt="uistackview tutorial"></p>
<p>Then build and run to verify that everything looks good and that there are no regressions.</p>
<p><code>Fill</code>å…·ä½“è¯´æ˜æ˜¯æ‰€æœ‰çš„<code>View</code>å®Œå…¨å¡«å……<code>stackview</code><br>SpecifyingÂ <code>Fill</code>Â means you want all the views to completely fill the stack view perpendicular to its axis. This causes theÂ <em>WHY VISIT</em>Â label to expand itself to the right edge as well.</p>
<p>But what if you only wanted the bottom label to expand itself to the edge?<br>ä½†æ˜¯å¦‚æœä½ åªæ˜¯å¸Œæœ›åº•éƒ¨çš„bottom labelæ‰©å±•è‡ªå·±çš„è¾¹ç¼˜å‘¢ï¼Ÿ</p>
<p>For now, it doesnâ€™t matter since both labels will have a clear background at runtime, but it will matter when youâ€™re converting the weather section.</p>
<p>Youâ€™ll learn how to accomplish that with the use of an additional stack view.</p>
<h3 id="Convert-the-â€œwhat-to-seeâ€-section"><a href="#Convert-the-â€œwhat-to-seeâ€-section" class="headerlink" title="Convert the â€œwhat to seeâ€ section"></a>Convert the â€œwhat to seeâ€ section</h3><p>This section is very similar to the previous one, so the instructions here are brief.</p>
<ol>
<li>First, select theÂ <em>WHAT TO SEE</em>Â label and theÂ **Â below it.</li>
<li>Click on theÂ <em>Stack</em>Â button.</li>
<li>Click on theÂ <em>Pin</em>Â button.</li>
<li>CheckmarkÂ <em>Constrain to margins</em>, and add the followingÂ <em>four</em>Â constraints:</li>
</ol>
<p>Top: 20, Leading: 0, Trailing: 0, Bottom: 20</p>
<ol>
<li>Set the stack viewâ€™sÂ <em>Alignment</em>Â toÂ <em>Fill</em>.</li>
</ol>
<p>Your storyboard should now look like this:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/whatToSee-650x305.png" alt="uistackview tutorial"></p>
<p>Build and run to verify that everything still looks the same.</p>
<p>This leaves you with just theÂ <em>weather</em>Â section left.</p>
<h2 id="Convert-the-weather-section"><a href="#Convert-the-weather-section" class="headerlink" title="Convert the weather section"></a>Convert the weather section</h2><p>TheÂ <em>weather</em>Â section is more complex than the others due to the inclusion of theÂ <em>Hide</em>Â button.</p>
<p>One approach you could take would be to create a nested stack view by embedding theÂ <em>WEATHER</em>Â label and theÂ <em>Hide</em>Â button into a horizontal stack view, and then embedding that horizontal stack view and theÂ **Â into a vertical stack view.</p>
<p>It would look something like this:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/40-weather-stack-in-stack_640x92.png" alt="uistackview tutorial"></p>
<p>ä¸€å¼€å§‹æˆ‘ä»¬å¯èƒ½æƒ³åˆ°çš„åŠæ³•æ˜¯å…ˆæŠŠ<code>weather</code>å’Œ<code>hide</code>æŒ‰é’®ç»„åˆæˆä¸€ä¸ª<code>horizontal</code>çš„<code>stack view</code>ï¼Œç„¶åå†å°†è¿™ä¸ª<code>Stack View</code>å’Œ<code>weatherinfoLabel</code>ç»„åˆæˆä¸€ä¸ª<code>Stack View</code>ï¼Œä½†æ˜¯è¿™å°±æœ‰ä¸ªé—®é¢˜å°±æ˜¯è¿™ä¸¤ä¸ª<code>view</code>å¿…é¡»æ˜¯ç­‰å®½çš„ã€‚è¿™ç§æ–¹æ¡ˆå°±æ— æ³•æ»¡è¶³<code>WeatherInfoLable</code>çš„è‡ªé€‚åº”ã€‚<br>Notice that theÂ <em>WEATHER</em>Â label has expanded to be equal to the height of theÂ <em>Hide</em>Â button. This isnâ€™t ideal since this will cause there to be extra space between the baseline of theÂ <em>WEATHER</em>Â label and the text below it.</p>
<p>Remember thatÂ <code>alignment</code>Â specifies positioning perpendicular to the stack view. So, you could set theÂ <code>alignment</code>Â toÂ <em>Bottom</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/41-weather-stack-in-stack-alignment-bottom_640x92.png" alt="uistackview tutorial"></p>
<p>But you really donâ€™t want the height of theÂ <em>Hide</em>Â button to dictate the height of the stack view.</p>
<p>The actual approach youâ€™ll take is to have theÂ <em>Hide</em>Â buttonÂ <em>not</em>Â be in the stack view for theÂ <em>weather</em>Â section, or any other stack view for that matter.</p>
<p>It will remain a subview of the top-level view, and youâ€™ll add a constraint from it to theÂ <em>WEATHER</em>Â label â€” which will be in a stack view. Thatâ€™s right, youâ€™ll add a constraint from a button outside of a stack view to a label within a stack view!</p>
<p>Select theÂ <em>WEATHER</em>Â label and theÂ <em><weatherInfoLabel></em>Â below it:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/weatherStacked-650x104.png" alt="uistackview tutorial"></p>
<p>Click on theÂ <em>Stack</em>Â button:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/43-weather-click-stack-button_640x92.png" alt="uistackview tutorial"></p>
<p>Click on theÂ <em>Pin</em>Â button, checkmarkÂ <em>Constrain to margins</em>Â and add the followingÂ <em>four</em>Â constraints:</p>
<p>Top: 20, Leading: 0, Trailing: 0, Bottom: 20</p>
<p>Set the stack viewâ€™sÂ <em>Alignment</em>Â toÂ <em>Fill</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/44-weather-alignment-fill_640x92.png" alt="uistackview tutorial"></p>
<p>You need a constraint between theÂ <em>Hide</em>Â buttonâ€™s left edge and theÂ <em>WEATHER</em>Â labelâ€™s right edge, so having theÂ <em>WEATHER</em>Â label fill the stack view wonâ€™t work.</p>
<p>However, youÂ <em>do</em>Â want the bottomÂ **Â to fill the stack view.</p>
<p>You can accomplish this by embedding just theÂ <em>WEATHER</em>Â label into a vertical stack view. Remember that theÂ <code>alignment</code>Â of a vertical stack view can be set toÂ <code>.leading</code>, and if the stack view is stretched beyond its intrinsic width, its contained views will remain aligned to its leading side.</p>
<p>Select theÂ <em>WEATHER</em>Â label using the document outline, or by using theÂ <em>Control-Shift-click</em>Â method:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/45-select-just-the-weather-label_640x92.png" alt="uistackview tutorial"></p>
<p>Then click on theÂ <em>Stack</em>Â button:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/46-weather-in-horizontal-stack_640x92.png" alt="uistackview tutorial"></p>
<p>SetÂ <em>Alignment</em>Â toÂ <em>Leading</em>, and make sureÂ <em>Axis</em>Â is set toÂ <em>Vertical</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/47-vertical-and-leading_640x92.png"></p>
<p>Perfect! Youâ€™ve got the outer stack view stretching the inner stack view to fill the width, but the inner stack view allows the label to keep its original width! é€šè¿‡å°†<code>weather</code>è®¾ç½®ä¸ºå•ç‹¬çš„<code>stackView</code>ï¼Œå¹¶å°†å¯¹é½æ¨¡å¼è®¾ç½®ä¸ºleadingï¼Œè¿™æ ·æ¥è¾¾åˆ°è‡ªé€‚åº”ã€‚</p>
<p>Build and run. Why on earth is theÂ <em>Hide</em>Â button hanging out in the middle of the text?</p>
<p><img src="http://blog.caohr.com/ImagesFolder/6-hideInPlainSight-255x500.png" alt="uistackview tutorial"></p>
<p>Itâ€™s because when you embedded theÂ <em>WEATHER</em>Â label in a stack view, any constraints between it and theÂ <em>Hide</em>Â button were removed.</p>
<p>To add new constraintsÂ <em>Control-drag</em>Â from theÂ <em>Hide</em>Â button to theÂ <em>WEATHER</em>Â label:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/49-drag-to-weather-label_380x94.png" alt="uistackview tutorial"></p>
<p>Hold downÂ <em>Shift</em>Â to select multiple options, and selectÂ <em>Horizontal Spacing</em>Â andÂ <em>Baseline</em>. Then click onÂ <em>Add Constraints</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/hideButtonAlignment-399x320.jpg" alt="uistackview tutorial"></p>
<p>Build and run. TheÂ <em>Hide</em>Â button should now be positioned correctly, and since the label that is being set to hidden is embedded in a stack view, pressingÂ <em>Hide</em>Â hides the label, and adjusts the views below it â€” all without having to manually adjust any constraints.</p>
<p><img src="http://blog.caohr.com/ImagesFolder/7-hidden-392x320.png" alt="uistackview tutorial"></p>
<p>Now that all the sections are in unique stack views, youâ€™re set to embed them all into an outer stack view, which will make the final two tasks trivial.</p>
<h3 id="Top-level-stack-view"><a href="#Top-level-stack-view" class="headerlink" title="Top-level stack view"></a>Top-level stack view</h3><p><em>Command-click</em>Â to select all five top-level stack views in the outline view:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/fiveSelected-650x245.png" alt="uistackview tutorial"></p>
<p>Then click on theÂ <em>Stack</em>Â button:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/topStack-650x167.png" alt="uistackview tutorial"></p>
<p>Click theÂ <em>Pin</em>Â button, checkmarkÂ <em>Constrain to margins</em>Â add constraints ofÂ <em>0</em>Â to all edges. Then setÂ <em>Spacing</em>toÂ <em>20</em>Â andÂ <em>Alignment</em>Â toÂ <em>Fill</em>. Your storyboard scene should now look like this:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/topStackConstrained-650x253.png" alt="uistackview tutorial"></p>
<p>Build and run:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/8-hideInPlainSite2-255x500.png" alt="uistackview tutorial"></p>
<p>Whoops! Looks like the hide button lost its constraints again when theÂ <em>WEATHER</em>Â stack view was embedded in the outer stack view. No problem, just add constraints to it again in the same way you did before.</p>
<p><em>Control-drag</em>Â from theÂ <em>Hide</em>Â button to theÂ <em>WEATHER</em>Â label, hold downÂ <em>Shift</em>, select bothÂ <em>Horizontal Spacing</em>Â andÂ <em>Baseline</em>. Then click onÂ <em>Add Constraints</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/hideButtonAlignment2.jpg" alt="uistackview tutorial"></p>
<p>Build and run. TheÂ <em>Hide</em>Â button is now positioned correctly.</p>
<h3 id="Repositioning-views"><a href="#Repositioning-views" class="headerlink" title="Repositioning views"></a>Repositioning views</h3><p>Now that all of the sections are in a top-level stack view, youâ€™ll modify the position of theÂ <em>what to see</em>section so that itâ€™s positioned above theÂ <em>weather</em>Â section.</p>
<p>Select theÂ <em>middle stack view</em>Â from the outline view andÂ <em>drag it between</em>Â the first and second view.</p>
<p><em>Note:</em>Â Keep the pointer slightly to the left of the stack views that youâ€™re dragging it between so that it remains aÂ <em>subview</em>Â of the outer stack view. The little blue circle should be positioned at the left edge between the two stack views and not at the right edge:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/57-drag-and-drop-to-reposition-section_639x130.png" alt="uistackview tutorial"></p>
<p>And now theÂ <em>weather</em>Â section is third from the top. If theÂ <em>Hide</em>Â doesnâ€™t move along with theÂ <em>weather</em>section, click on theÂ <em>Refresh Layout</em>Â button.</p>
<p><img src="http://blog.caohr.com/ImagesFolder/refreshLayoutButton.png" alt="uistackview tutorial"></p>
<p>TheÂ <em>Hide</em>Â button will now be back in the correct position:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/60-hide-button-back-to-correct-position_640x130.png" alt="uistackview tutorial"></p>
<p>Granted, repositioning the view with Auto Layout and re-adding constraints would not have been the most difficult thing youâ€™ve ever done, but didnâ€™t this feel oh-so-much nicer?</p>
<h3 id="Size-class-based-configuration"><a href="#Size-class-based-configuration" class="headerlink" title="Size class based configuration"></a>Size class based configuration</h3><p>Finally, you can turn your attention to the one remaining task on your list. In landscape mode, vertical space is at a premium, so you want to bring the sections of the stack view closer together. To do this, youâ€™ll use size classes to set the spacing of the top-level stack view toÂ <em>10</em>Â instead ofÂ <em>20</em>Â when the vertical size class is compact.</p>
<p>Select the top-level stack view and click on the littleÂ <em>+</em>Â button next toÂ <em>Spacing</em>:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/sizeClasses-480x271.png" alt="uistackview tutorial"></p>
<p>ChooseÂ <em>Any Width</em>Â &gt;Â <em>Compact Height</em>Â and selectÂ <em>Add Variation</em></p>
<p><img src="http://blog.caohr.com/ImagesFolder/CompactHeight-480x183.png" alt="uistackview tutorial"></p>
<p>And set theÂ <em>Spacing</em>Â toÂ <em>10</em>Â in the newÂ <em>wAny hC</em>Â field:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/sizeClasses2-1-480x320.png" alt="uistackview tutorial"></p>
<p>Build and run. The spacing in portrait mode should remain unchanged. Rotate the simulator (âŒ˜â†) and note that the spacing between the sections has decreased and the buttons now have ample space from the bottom of the view:</p>
<p><img src="http://blog.caohr.com/ImagesFolder/15319940423928.png"></p>
<p>If you didnâ€™t add a top-level stack view, you stillÂ <em>could</em>Â have used size classes to set the vertical spacing to 10 on each of the four constraints that separate the five sections, but isnâ€™t it so much better to set it in just a single place?</p>
<p>You have better things to do with your time, like animation!</p>
<h2 id="Animation"><a href="#Animation" class="headerlink" title="Animation"></a>Animation</h2><p>Currently, itâ€™s a bit jarring when hiding and showing the weather details. Youâ€™ll add some animation to smooth the transition.</p>
<p>Stack views are fully compatible with theÂ <code>UIView</code>Â animation engine. This means that animating the appearance/disappearance of an arranged subview, is as simple as toggling itsÂ <code>hidden</code>Â propertyÂ <em>inside</em>Â an animation block.</p>
<p>Itâ€™s time to write some code! OpenÂ <em>SpotInfoViewController.swift</em>Â and take a look atÂ <code>updateWeatherInfoViews(hideWeatherInfo:animated:)</code>.</p>
<p>Youâ€™ll see this line at the end of the method:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weatherInfoLabel.hidden <span class="operator">=</span> shouldHideWeatherInfo</span><br></pre></td></tr></table></figure>
<p>Replace it with the following:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> animated &#123;</span><br><span class="line">    <span class="type">UIView</span>.animate(withDuration: <span class="number">0.3</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.weatherInfoLabel.isHidden <span class="operator">=</span> shouldHideWeatherInfo</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    weatherInfoLabel.isHidden <span class="operator">=</span> shouldHideWeatherInfo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Build and run, and tap theÂ <em>Hide</em>Â orÂ <em>Show</em>Â button. Doesnâ€™t the animated version feel much nicer?</p>
<p>In addition to animating the hidden property on views contained within the stack view, you can also animate properties on the stack view itself, such asÂ <code>alignment</code>,Â <code>distribution</code>,Â <code>spacing</code>Â and even theÂ <code>axis</code>.</p>
<h2 id="Where-to-go-from-here"><a href="#Where-to-go-from-here" class="headerlink" title="Where to go from here?"></a>Where to go from here?</h2><p>You can download the completed projectÂ <a target="_blank" rel="noopener" href="https://koenig-media.raywenderlich.com/uploads/2017/07/VacationSpots_Final-1.zip">here</a>.</p>
<p>In thisÂ <code>UIStackView</code>Â tutorial, you learned a lot about stack views as well as the various properties that a stack view uses to position its subviews. Stack views are highly configurable, and there may be more than one way achieve the same result.</p>
<p>The best way to build on what youâ€™ve learned is to experiment with various properties yourself. Instead of setting a property and moving on, see how playing with the other properties affects the layout of views within the stack view.</p>
<p>In the meantime, if you have any questions or comments about thisÂ <code>UIStackView</code>Â tutorial or Stack ViewsÂ in general, please join the forum discussion below!</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Ray-Wenderlich/" rel="tag"># Ray Wenderlich</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/12/16/Swift/String/" rel="prev" title="String">
      <i class="fa fa-chevron-left"></i> String
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/12/16/Swift/Singleton/" rel="next" title="Singleton">
      Singleton <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Getting-started"><span class="nav-number">1.</span> <span class="nav-text">Getting started</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Your-first-stack-view"><span class="nav-number">2.</span> <span class="nav-text">Your first stack view</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Converting-the-sections"><span class="nav-number">3.</span> <span class="nav-text">Converting the sections</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Rating-section"><span class="nav-number">3.1.</span> <span class="nav-text">Rating section</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Unembedding-a-stack-view"><span class="nav-number">3.2.</span> <span class="nav-text">Unembedding a stack view</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Your-first-vertical-stack-view"><span class="nav-number">3.3.</span> <span class="nav-text">Your first vertical stack view</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Alignment-property"><span class="nav-number">3.4.</span> <span class="nav-text">Alignment property</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Convert-the-%E2%80%9Cwhat-to-see%E2%80%9D-section"><span class="nav-number">3.5.</span> <span class="nav-text">Convert the â€œwhat to seeâ€ section</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Convert-the-weather-section"><span class="nav-number">4.</span> <span class="nav-text">Convert the weather section</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Top-level-stack-view"><span class="nav-number">4.1.</span> <span class="nav-text">Top-level stack view</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Repositioning-views"><span class="nav-number">4.2.</span> <span class="nav-text">Repositioning views</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Size-class-based-configuration"><span class="nav-number">4.3.</span> <span class="nav-text">Size class based configuration</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Animation"><span class="nav-number">5.</span> <span class="nav-text">Animation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Where-to-go-from-here"><span class="nav-number">6.</span> <span class="nav-text">Where to go from here?</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="HR"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">HR</p>
  <div class="site-description" itemprop="description">Swimming ğŸŠ in the seağŸŒŠof code!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">57</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/caohrong" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;caohrong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:caohr@outlook.com" title="E-Mail â†’ mailto:caohr@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/caohuanrong" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;caohuanrong" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HR</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://caohr.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://blog.caohr.com/2021/12/16/Swift/StackView/";
    this.page.identifier = "2021/12/16/Swift/StackView/";
    this.page.title = "UIStackView Tutorial Introducing Stack Views";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://caohr.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
